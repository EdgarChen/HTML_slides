<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <title>NetworkManager slides</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1274, user-scalable=no">
    <link rel="stylesheet" href="../themes/mozilla/styles/style.css">
    <!--
        To apply styles to the certain slides
        use slide ID to get needed elements
        -->
    <style>
        #Cover h2 {
            color:#FFF;
            text-align:center;
            font-size:40px;
            }
        #FitToWidth h2,
        #FitToHeight h2 {
            color:#fff;
            text-align:center;
            }
    </style>
</head>
<body class="list">
    <header class="caption">
        <h1>NetworkManager Enhancement</h1>
        <p>2014/09/09</p>
    </header>

<!-- 
    Simply copy the whole block for each slide you want.
    Special slides get extra classes. Each slide needs an ID 
    to allow for bookmarking and target jumping.
    
    Images, videos and SVG objects are automatically centred.

    If you add a "cover" class images are taking over the whole 
    screen resized to height. Add a "w" class to resize to width.

 -->
    <div class="slide" id="Introduce"><div>
        <section>
            <header>
                <h2>Introduce</h2>
            </header>
            <ul>
                <li>What we would like to enhance?
                    <ul>
                        <li>Shared apn connection.</li>
                        <li>3G and Wifi switching.</li>
                        <li>Mobile data connection request (e.g. MMS, SUPL ...).</li>
                        <li>Freezing RIL Interface for data connection.</li>
                    </ul>
                </li>
            </ul>
        </section>
    </div></div>

    <div class="slide" id="Shared_apn"><div>
        <section>
            <header>
                <h2>Shared apn connection</h2>
            </header>
            <ul>
                <li>Proposal:
                    <ul>
                        <li>Each Apn type has it's own NetworkInterface even if it shares the same apn setting with other type.
                        </li>
                    </ul>
                </li><br>
                <li>Please see <a href=https://bugzilla.mozilla.org/show_bug.cgi?id=939046><strike>Bug 939046</strike></a> (Fixed).</li>
            </ul>
        </section>
    </div></div>

    <div class="slide" id="Switching"><div>
        <section>
            <header>
                <h2>3G and Wifi switching</h2>
            </header>
            <ul>
                <li>Proposal:
                    <ul>
                        <li>NetworkInterface will be registered to NetworkManager once the network is available.</li>
                        <li>Move the policy control logic to NetworkManager.</li>  
                        <li>NetworkManager will call activate()/deactivate() to control NetworkInterface based on policy. (Drop mobile connection when wifi is connected)</li>
                    </ul>
                </li>
                <li>Please see <a href=https://bugzilla.mozilla.org/show_bug.cgi?id=911713>Bug 911713</a>.</li>
            </ul>
        </section>
    </div></div>

    <div class="slide" id="Switching_2"><div>
        <section>
            <header>
                <h2>3G and Wifi switching</h2>
            </header>
            <ul>
                <li>Interface changes:
                    <pre>
                        <code><mark class=comment>/* NetworkInterface */</mark></code>
                        <code>partial interface nsINetworkInterface {</code>
                        <code>  <mark>void activate();</mark> <mark class=comment>// establish connection</mark></code>
                        <code>  <mark>void deactivate();</mark> <mark class=comment>// drop connection</mark></code>
                        <code>}</code>
                    </pre>
                    <pre>
                        <code><mark class=comment>/* RadioInterface */</mark></code>
                        <code>partial interface nsIRadioInterface {</code>
                        <code>  <mark class=delete>void updateRILNetworkInterface();</mark></code>
                        <code>}</code>
                    </pre>
                </li>
            </ul>
        </section>
    </div></div>

    <div class="slide cover w" id="Switching_now"><div>
        <section>
            <header>
            </header>
            <img src="pictures/3G and Wifi switching (Now).png" alt="">
        </section>
    </div></div>

    <div class="slide cover w" id="Switching_proposed"><div>
        <section>
            <header>
            </header>
            <img src="pictures/3G and Wifi switching (Proposed).png" alt="">
        </section>
    </div></div>

    <div class="slide" id="Request"><div>
        <section>
            <header>
                <h2>Connection request</h2>
            </header>
            <ul>
                <li>Proposal:
                    <ul>
                        <li>NetworkInterface will be registered to NetworkManager once the network is available.</li>
                        <li>Other modules request/release specific type of connection through NetworkManager. (e.g. MMS, SUPL ... etc)</li>
                        <li>NetworkManager will call activate()/deactivate() of corresponding network interface to establish/drop connection.</li>
                    </ul>
                </li>
                <li>Please see <a href=https://bugzilla.mozilla.org/show_bug.cgi?id=928861>Bug 928861</a>.</li>
            </ul>
        </section>
    </div></div>

    <div class="slide" id="Request_2"><div>
        <section>
            <header>
                <h2>Connection request</h2>
            </header>
            <ul>
                <li>Interface changes:
                    <pre>
                        <code><mark class=comment>/* NetworkInterface */</mark></code>
                        <code>partial interface nsINetworkInterface {</code>
                        <code>  <mark>void activate();</mark> <mark class=comment>// establish connection</mark></code>
                        <code>  <mark>void deactivate();</mark> <mark class=comment>// drop connection</mark></code>
                        <code>}</code>
                    </pre>
                    <pre>
                        <code><mark class=comment>/* RadioInterface */</mark></code>
                        <code>partial interface nsIRadioInterface {</code>
                        <code>  <mark class=delete>void setupDataCallByType(in DOMString apntype);</mark></code>
                        <code>  <mark class=delete>void deactivateDataCallByType(in DOMString apntype);</mark></code>
                        <code>  <mark class=delete>long getDataCallStateByType(in DOMString apntype);</mark></code>
                        <code>}</code>
                    </pre>
                </li>
            </ul>
        </section>
    </div></div>

    <div class="slide cover h" id="Request_now"><div>
        <section>
            <header>
            </header>
            <img src="pictures/Connection request (Now).png" alt="">
        </section>
    </div></div>

    <div class="slide cover h" id="Request_proposed"><div>
        <section>
            <header>
            </header>
            <img src="pictures/Connection request (Proposed).png" alt="">
        </section>
    </div></div>

    <div class="slide" id="Freezing"><div>
        <section>
            <header>
                <h2>Freezing RIL Interface</h2>
            </header>
            <ul>
                <li>Plan for v2.3</li>
                <li>Proposal:
                    <ul>
                        <li>Move dataconnection related code out of RadioInterfaceLayer.js</li>
                        <li>CAT don't need to implement nsINetworkInterface</li>
                        <li>We will add another API to nsIRadioInterface.idl for NetworkInterface instances to call.</li>
                    </ul>
                </li>
            </ul>
        </section>
    </div></div>

    <div class="slide" id="Freezing_2"><div>
        <section>
            <header>
                <h2>Freezing RIL Interface</h2>
            </header>
            <ul>
                <li>Interface changes:
                    <pre>
                        <code><mark class=comment>/* nsIRadioInterface */</mark></code>
                        <code>partial interface nsIRadioInterface {</code>
                        <code>  void setupDataConnection(in DOMString apn, in DOMString username, </code>
                        <code>                           in DOMString password, in long authType, </code>
                        <code>                           in long pdpType, </code>
                        <code>                           in nsIGonkDataConnectionCallback callback); </code>
                        <code> </code>
                        <code>  void deactivateDataConnection(in long cid, </code>
                        <code>                                in nsIGonkDataConnectionCallback callback); </code>
                        <code> </code>
                        <code>  void getDataConnectionList(in nsIGonkDataConnectionCallback callback); </code>
                        <code>};</code>
                    </pre>
                </li>
            </ul>
        </section>
    </div></div>

    <div class="slide" id="Freezing_3"><div>
        <section>
            <header>
                <h2>Freezing RIL Interface</h2>
            </header>
            <ul>
                <li>Interface changes:
                    <pre>
                        <code></code>
                        <code><mark class=comment>/* nsIGonkDataConnectionCallback */</mark></code>
                        <code>partial interface nsIGonkDataConnectionCallback {</code>
                        <code>  void notifyEnumerateConnections([array, size_is(count)] </code>
                        <code>                                  in nsIGonkDataConnection connection);</code>
                        <code>  void notifySuccess(in nsIGonkDataConnection connection)</code>
                        <code>  void notifyError(in DOMString errorMsg) </code>
                        <code>};</code>
                    </pre>
                    <pre>
                        <code><mark class=comment>/* nsIGonkDataConnectionService */</mark></code>
                        <code>partial interface nsIGonkDataConnectionService {</code>
                        <code>  void notifyDataConnectionChanged(in nsIGonkDataConnection connection); </code>
                        <code>};</code>
                    </pre>
                </li>
            </ul>
        </section>
    </div></div>

    <!--
        To hide progress bar from entire presentation
        just remove “progress” element.
        -->
    <div class="progress"><div></div></div>
    <script src="../scripts/script.js"></script>
    <!-- Copyright © 2010–2012 EdgarChen — mozilla.com -->
</body>
</html>